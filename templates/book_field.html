{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <h2>Book {{ field.name }}</h2>

  <form method="POST">
    {% csrf_token %}

    <label>Date:</label>
    <input type="date" name="date" class="form-control mb-3" required>

    <h5>Select a Time Slot:</h5>
    <div class="row">
      {% for slot in slots %}
      <div class="col-6 col-md-4 mb-3">
        <label class="w-100">
          <input type="radio" name="slot_id" value="{{ slot.id }}" required>

          {% if user_teams %}
          <div class="mb-3">
            <label for="team_id" class="form-label">Book for Team (optional)</label>
            <select name="team_id" id="team_id" class="form-select">
              <option value="">Just Myself</option>
              {% for team in user_teams %}
                <option value="{{ team.id }}">{{ team.name }}</option>
              {% endfor %}
            </select>
          </div>
          {% endif %}

          <div class="btn btn-outline-primary w-100">
            {{ slot.start_time }} - {{ slot.end_time }}
          </div>
        </label>
      </div>
      {% endfor %}
      {% if user.teammember_set.exists %}
      <label class="mt-3"><strong>Book as Team:</strong></label>
      <select name="team_id" class="form-select">
        <option value="">Book as individual</option>
        {% for membership in user.teammember_set.all %}
          <option value="{{ membership.team.id }}">{{ membership.team.name }}</option>
        {% endfor %}
      </select>
      {% endif %}

    </div>

    <button class="btn btn-success w-100 mt-3">Confirm Booking</button>
  </form>
</div>
{% endblock %}
