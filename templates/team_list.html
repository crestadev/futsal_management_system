{% extends 'base.html' %}
{% block title %}My Teams{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>My Teams</h3>
    <a href="{% url 'create_team' %}" class="btn btn-primary">Create Team</a>
  </div>

  <h5>Your Teams</h5>
  {% if my_teams %}
    <ul class="list-group mb-4">
      {% for t in my_teams %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <span>
          <strong>{{ t.name }}</strong>
          {% if t.owner == user %}<span class="badge bg-info ms-2">Owner</span>{% endif %}
        </span>
        <div>
          <span class="badge bg-secondary me-2">{{ t.members.count }} members</span>
          {% if t.owner != user %}
          <a href="{% url 'leave_team' t.id %}" class="btn btn-outline-danger btn-sm">Leave</a>
          {% endif %}
        </div>
      </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>You are not a member of any team yet.</p>
  {% endif %}

  <h5>Join Public Teams</h5>
  {% if other_public_teams %}
    <ul class="list-group">
      {% for t in other_public_teams %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <span><strong>{{ t.name }}</strong></span>
        <a href="{% url 'join_team' t.id %}" class="btn btn-outline-primary btn-sm">Join</a>
      </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No other public teams available.</p>
  {% endif %}
</div>
{% endblock %}
